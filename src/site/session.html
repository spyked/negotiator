<!DOCTYPE html>
<html>
	<title>SiAgent</title>
	<head>

	<!-- CSS and scripts go here -->
	<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/themes/start/jquery-ui.css" /> 
	<script 
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.js"></script> 
	<script type="text/javascript" src="ui.spinner.js"></script> 

	<script>
		$(document).ready(function() {
			$("#siCpu").spinner({min:0, max:16});
			$("#siRam").spinner({min:0, max:14});
			$("#siInterconnect").spinner({min:0, max:25});
			$("#siDsp").spinner({min:0, max:15});
			$("#siSensor").spinner({min:0, max:6});
            prices = new Array($("#cpuPrice"), $("#ramPrice"),
                        $("#interconnectPrice"), $("#dspPrice"),
                        $("#sensorPrice"));

            // get user name
			$.ajax({
				url: "name",
				success: function(msg) {
					$("#humanname").append(msg);
				}
			});

            // get time
            $.ajax({
                url: "time",
                success: function(msg) {
                    $("#time").append(msg);
                }
            });

            // get offer, parse it and modify elements
            $.ajax({
                url: "offer",
                success: function(msg) {
                    msgList = msg.split(" ");
					for (i = 0;i < 5;i++) {
						prices[i].empty();
						prices[i].append(msgList[i]);
					}
                }
            });

            // button click functions
			// TODO
            $("#accept").click(function() {
            });

            $("#propose").click(function() {
            });

            $("#end-round").click(function() {
            });

            $("#opt-out").click(function() {
            });

		});
	</script>

	</head>

	<!-- Session page body -->
	<body>
		<h1>SiAgent</h1>
		<p>Human negotiator: <b id="humanname"></b></p>
        <p>Current time: <b id="time"></b></p>

		<div id="controls">
			<h4>Offers:</h4>
			<table class="grid ui-state-highlight ui-corner-all">
			<tr>
				<td>Component</td>
				<td>Current price</td>
				<td>Proposed price</td>
			</tr><tr>
				<td><b>CPU</b></td>
				<td><div id="cpuPrice">0</div></td>
				<td><input type="text" size="4" id="siCpu" value="16"/></td>
			</tr><tr>
				<td><b>RAM</b></td>
				<td><div id="ramPrice">0</div></td>
				<td><input type="text" size="4" id="siRam" value="14" /></td>
			</tr><tr>
				<td><b>Interconnect</b></td>
				<td><div id="interconnectPrice">0</div></td>
				<td><input type="text" size="4" id="siInterconnect"
					value="25"/></td>
			</tr><tr>
				<td><b>DSP</b></td>
				<td><div id="dspPrice">0</div></td>
				<td><input type="text" size="4"  id="siDsp" value="15"/></td>
			</tr><tr>
				<td><b>Sensor</b></td>
				<td><div id="sensorPrice">0</div></td>
				<td><input type="text" size="4" id="siSensor" value="6"/></td>
			</tr> 
			</table>

			<p>
				<input type="button" id="accept" value="Accept current offer" />
				<input type="button" id="propose" value="Propose offer" />
				<input type="button" id="end-round" value="End round" />
				<input type="button" id="opt-out" value="Opt out" />
			</p>
		</div>

		<div id="chatbox">
			<h4>History of decisions:</h4>
			<table class="grid ui-state-highlight ui-corner-all">
			<tr><td><b>Human</b>:</td><td>A decision</td></tr>
			<tr><td><b>Computer</b>:</td><td>Another decision<td></tr>
			<tr><td><b>Dunno</b>:</td><td>...</td></tr>
			</table>
		</div>

	</body>
</html>
